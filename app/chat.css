/* ============ 颜色变量：明/暗主题自适应 ============ */
:root {
  --bg: #ffffff;
  --text: #111827;
  --muted: #6b7280;
  --panel: #f9fafb;
  --bubble: #f3f4f6;
  --border: #e5e7eb;
  --accent: #10b981;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0c0e12;
    --text: #e6e8ef;
    --muted: #a7adbb;
    --panel: #121620;
    --bubble: #1b2030;
    --border: #2a2f41;
    --accent: #10b981;
  }
}

/* ============ 页面基础 ============ */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

.chat-container {
  max-width: 980px;
  margin: 0 auto;
  padding: 24px 20px 40px;
  display: flex;
  flex-direction: column;
  gap: 18px;
}

/* ============ 顶部栏 ============ */
.chat-header {
  display: flex; align-items: center; justify-content: space-between;
  padding-bottom: 14px; border-bottom: 1px solid var(--border);
}
.logo { display: flex; align-items: center; gap: 10px; font-weight: 800; font-size: 22px; }
.logo img { width: 22px; height: 22px; }

select {
  appearance: none;
  background: transparent;
  color: var(--text);
  border: 1px solid var(--border);
  padding: 8px 12px;
  border-radius: 10px;
}

/* ============ 系统提示卡片 ============ */
.system-card {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
}
.system-label { font-size: 13px; color: var(--muted); margin-bottom: 6px; }
.system-card textarea {
  width: 100%; min-height: 64px; resize: vertical;
  background: transparent; border: 1px solid var(--border); border-radius: 10px;
  padding: 10px 12px; color: var(--text);
}

/* ============ 聊天消息区 ============ */
.chat-body { display: flex; flex-direction: column; gap: 18px; }

/* 每条消息：左侧头像+标签，右侧内容气泡 */
.message {
  display: grid;
  grid-template-columns: 220px 1fr;
  gap: 16px;
  align-items: flex-start;
}

/* 左侧：头像 + 名称标签（纯文字，无背景框） */
.message-avatar {
  display: flex; align-items: center; gap: 10px;
  min-width: 180px; padding: 4px 0;
}
.avatar-img {
  width: 32px; height: 32px; display: block;
  border-radius: 8px; border: 1px solid var(--border);
  background: transparent;
}
.avatar-label { font-weight: 700; color: var(--muted); letter-spacing: .2px; }

/* 右侧：消息内容气泡 */
.message-content {
  width: 100%;
  background: var(--bubble);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px 16px;
}
.message-text { color: var(--text); white-space: pre-wrap; word-break: break-word; }
.message-text img { max-width: 100%; border-radius: 12px; border: 1px solid var(--border); }

/* ============ 图片预览（可删除） ============ */
.preview {
  display: flex; gap: 10px; flex-wrap: wrap;
  margin-top: 4px;
}
.preview-item { position: relative; width: 96px; height: 96px; }
.preview-item img {
  width: 100%; height: 100%; object-fit: cover;
  border-radius: 10px; border: 1px solid var(--border);
}
.preview-del {
  position: absolute; top: -6px; right: -6px;
  width: 20px; height: 20px; border: none; border-radius: 50%;
  background: rgba(0,0,0,.6); color: #fff; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  font-size: 12px;
}
.preview-item:hover .preview-del { opacity: 1; }

/* ============ 输入区 ============ */
.chat-input {
  position: sticky; bottom: 0; padding-top: 8px;
  background: var(--bg);
}
.input-form {
  display: grid; grid-template-columns: auto 1fr auto; gap: 10px; align-items: flex-end;
}
.input-tools { display: flex; align-items: center; gap: 8px; }
.tool-button {
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
  border-radius: 10px;
  padding: 8px 10px;
  cursor: pointer;
}
textarea {
  width: 100%; min-height: 54px; resize: vertical;
  background: transparent; border: 1px solid var(--border);
  border-radius: 12px; padding: 12px 14px; color: var(--text);
}
button[type="submit"] {
  background: var(--accent);
  color: #fff; border: none; border-radius: 12px;
  padding: 0 18px; height: 42px; cursor: pointer;
}
button[disabled] { opacity: .6; cursor: not-allowed; }

/* ============ 生成图片开关 ============ */
.gen-image-toggle { display: flex; align-items: center; gap: 8px; margin-left: 6px; }
.gen-image-toggle .toggle { display: flex; align-items: center; gap: 6px; color: var(--muted); }
.gen-image-toggle .size-select {
  background: transparent; border: 1px solid var(--border); border-radius: 10px;
  padding: 6px 8px; color: var(--text);
}

/* 页脚提示 */
.footer-tip { color: var(--muted); font-size: 12px; margin-top: 8px; text-align: center; }
/* 标题 */
h1,h2,h3,h4,h5,h6 { margin: 10px 0 8px; line-height: 1.3; }
h1{font-size:28px} h2{font-size:24px} h3{font-size:20px}
h4{font-size:18px} h5{font-size:16px} h6{font-size:15px}

/* 水平线 */
hr { border: none; border-top: 1px solid var(--border); margin: 12px 0; }

/* 引用块 */
blockquote {
  margin: 8px 0; padding: 10px 12px;
  border-left: 4px solid var(--border);
  background: var(--panel);
  border-radius: 8px;
}
blockquote p { margin: 6px 0; }

/* 列表 */
ul, ol { margin: 8px 0 8px 22px; }
li { margin: 4px 0; }

/* 内联代码 */
.inline-code {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 1px 4px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
}
/* -------- Markdown 表格美化 -------- */
.md-table {
  width: 100%;
  border-collapse: collapse; /* 合并边框 */
  margin: 12px 0;
  font-size: 14px;
  text-align: left;
  table-layout: auto;
}

.md-table th,
.md-table td {
  border: 1px solid #ccc; /* 横竖线 */
  padding: 8px 12px;
  vertical-align: middle;
}

.md-table th {
  background-color: #f7f7f7; /* 表头浅灰底色 */
  font-weight: bold;
}

.table-wrap {
  overflow-x: auto; /* 宽度超出时可横向滚动 */
  margin: 8px 0;
}
/* -------- Markdown 表格美化 -------- */
.md-table {
  width: 100%;
  border-collapse: collapse;
  margin: 12px 0;
  font-size: 14px;
  text-align: left;
  table-layout: auto;
}

.md-table th,
.md-table td {
  border: 1px solid var(--table-border-color);
  padding: 8px 12px;
  vertical-align: middle;
}

/* 表头 */
.md-table th {
  background-color: var(--table-header-bg);
  color: var(--table-header-text);
  font-weight: bold;
}

/* 斑马条纹 */
.md-table tr:nth-child(even) td {
  background-color: var(--table-row-alt);
}

.table-wrap {
  overflow-x: auto;
  margin: 8px 0;
}

/* -------- 日间模式 (默认浅色) -------- */
:root {
  --table-border-color: #ccc;
  --table-header-bg: #f2f2f2;
  --table-header-text: #222;
  --table-row-alt: #fafafa;
}

/* -------- 夜间模式 (深色) -------- */
@media (prefers-color-scheme: dark) {
  :root {
    --table-border-color: #555;
    --table-header-bg: #333;
    --table-header-text: #eee;
    --table-row-alt: #1e1e1e;
  }
}
/* 鼠标悬停高亮 */
.md-table tr:hover td {
  background-color: var(--table-hover-bg);
}

/* 日间模式 hover */
:root {
  --table-hover-bg: #e6f0ff; /* 淡蓝色 */
}

/* 夜间模式 hover */
@media (prefers-color-scheme: dark) {
  :root {
    --table-hover-bg: #444; /* 深灰蓝 */
  }
}
.advanced-card {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
}

.advanced-row { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.tips.small { color: var(--muted); font-size: 12px; margin-top: 6px; }